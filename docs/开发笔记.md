# 开发笔记

安装 nasm 和 bochs：

```shell
sudo apt install nasm bochs-x
```

编译主引导扇区代码：

```shell
nasm -f bin boot.asm -o boot.bin
```

创建硬盘镜像：

```shell
bximage -q -hd=16 -func=create -sectsize=512 -imgmode=flat master.img
```

将编译好的主引导扇区代码写入硬盘镜像：

```shell
dd if=boot.bin of=master.img bs=512 count=1 conv=notrunc
```

修改 bochs 的配置文件：

- romimage: file="/usr/share/bochs/BIOS-bochs-legacy"
- boot: disk
- display_library: x, options="gui_debug"
- ata0-master: type=disk, path="master.img", mode=flat

---
