# 学习笔记

## 主引导扇区

主引导扇区是硬盘的第一个扇区，大小为 512 字节，主要用于读取并执行内核加载器：

- 代码：446 字节。
- 硬盘分区表：64 字节 = 4 * 16 字节。
- 魔数：2 字节。`0x55` 和 `0xaa`。

## int 0x10

中断号 0x10 为 BIOS 视频服务中断，通过 AH 寄存器指定功能号，其他寄存器提供参数。

| AH  | 功能         | 参数说明                                   |
| --- | ------------ | ------------------------------------------ |
| 0x00 | 设置显示模式 | AL = 模式号，例如 03h = 80x25 彩色文本模式 |
| 0x01 | 设置光标位置 | CH = 行, CL = 列                           |
| 0x0e | 打印字符     | AL = ASCII 字符, BH = 页号, BL = 属性      |
| 0x13 | 绘制像素     | CX = 列数, DX = 行数, AL = 颜色            |

例如：

- 把屏幕设置成 80 列 × 25 行彩色文本模式：

    ```nasm
    mov ah, 0x00
    mov al, 0x03
    int 0x10
    ```

- 打印字符：

    ```nasm
    mov ah, 0x0e
    mov al, 'H'
    int 0x10
    ```

    会在当前光标位置显示一个 H，并并自动移动光标到下一个位置。

